<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            direction: rtl;
        }
        .test-box {
            border: 2px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { border-color: green; background: #d4edda; }
        .error { border-color: red; background: #f8d7da; }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ - LLM Router</h1>
    
    <div class="test-box">
        <h2>1ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Frontend</h2>
        <p id="frontend-status">âœ… Frontend ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­</p>
    </div>

    <div class="test-box" id="backend-box">
        <h2>2ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Backend</h2>
        <button onclick="testBackend()">Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Backend</button>
        <p id="backend-status">Ø§Ù†Ù‚Ø± Ø§Ù„Ø²Ø± Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</p>
    </div>

    <div class="test-box">
        <h2>3ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± localStorage</h2>
        <button onclick="clearStorage()">Ø§Ù…Ø³Ø­ localStorage</button>
        <button onclick="checkStorage()">ØªØ­Ù‚Ù‚ Ù…Ù† localStorage</button>
        <p id="storage-status"></p>
    </div>

    <div class="test-box">
        <h2>4ï¸âƒ£ Ø§ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h2>
        <a href="http://localhost:3000" target="_blank">
            <button style="background: #007bff; color: white; border: none;">Ø§ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
        </a>
    </div>

    <script>
        async function testBackend() {
            const statusEl = document.getElementById('backend-status');
            const boxEl = document.getElementById('backend-box');
            
            statusEl.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...';
            boxEl.className = 'test-box';
            
            try {
                const response = await fetch('http://localhost:8000/api/health');
                const data = await response.json();
                
                if (response.ok) {
                    statusEl.textContent = 'âœ… Backend ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ù†Ø³Ø®Ø©: ' + data.version;
                    boxEl.classList.add('success');
                } else {
                    statusEl.textContent = 'âŒ Backend ÙŠØ³ØªØ¬ÙŠØ¨ Ù„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£: ' + response.status;
                    boxEl.classList.add('error');
                }
            } catch (error) {
                statusEl.textContent = 'âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Backend: ' + error.message;
                statusEl.innerHTML += '<br>ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Backend ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ http://localhost:8000';
                boxEl.classList.add('error');
            }
        }

        function clearStorage() {
            localStorage.clear();
            document.getElementById('storage-status').textContent = 'âœ… ØªÙ… Ù…Ø³Ø­ localStorage';
            setTimeout(() => {
                document.getElementById('storage-status').textContent = '';
            }, 3000);
        }

        function checkStorage() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            const statusEl = document.getElementById('storage-status');
            
            if (token || user) {
                statusEl.textContent = `âš ï¸ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©: Token: ${token ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}, User: ${user ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}`;
            } else {
                statusEl.textContent = 'âœ… localStorage ÙØ§Ø±Øº';
            }
        }

        // Auto-test on load
        window.onload = () => {
            testBackend();
            checkStorage();
        };
    </script>
</body>
</html>
